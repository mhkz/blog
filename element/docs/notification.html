<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>notify通知组件 | 郭峰</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="记录日常的点点滴滴">
    <link rel="preload" href="/blog/assets/css/0.styles.09979b4e.css" as="style"><link rel="preload" href="/blog/assets/js/app.ed40e995.js" as="script"><link rel="preload" href="/blog/assets/js/3.57e1f601.js" as="script"><link rel="preload" href="/blog/assets/js/1.380deb6a.js" as="script"><link rel="preload" href="/blog/assets/js/7.ee8b7bf7.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.5f1c4994.js"><link rel="prefetch" href="/blog/assets/js/11.743a646c.js"><link rel="prefetch" href="/blog/assets/js/12.ba901cfd.js"><link rel="prefetch" href="/blog/assets/js/13.c856683f.js"><link rel="prefetch" href="/blog/assets/js/14.bad147f7.js"><link rel="prefetch" href="/blog/assets/js/15.df391b4c.js"><link rel="prefetch" href="/blog/assets/js/16.f42a3678.js"><link rel="prefetch" href="/blog/assets/js/17.20233dd9.js"><link rel="prefetch" href="/blog/assets/js/18.61aeefb8.js"><link rel="prefetch" href="/blog/assets/js/19.dcc2612c.js"><link rel="prefetch" href="/blog/assets/js/20.3e3e5a13.js"><link rel="prefetch" href="/blog/assets/js/21.1159e2e7.js"><link rel="prefetch" href="/blog/assets/js/22.cb41069e.js"><link rel="prefetch" href="/blog/assets/js/23.1db4cf2d.js"><link rel="prefetch" href="/blog/assets/js/24.52e69ec3.js"><link rel="prefetch" href="/blog/assets/js/25.7ad38d7e.js"><link rel="prefetch" href="/blog/assets/js/26.3ce680e0.js"><link rel="prefetch" href="/blog/assets/js/27.81c13957.js"><link rel="prefetch" href="/blog/assets/js/28.d5decb07.js"><link rel="prefetch" href="/blog/assets/js/29.cd1c3440.js"><link rel="prefetch" href="/blog/assets/js/30.1e79516e.js"><link rel="prefetch" href="/blog/assets/js/31.1cd9f681.js"><link rel="prefetch" href="/blog/assets/js/32.708561dc.js"><link rel="prefetch" href="/blog/assets/js/33.c9908e4f.js"><link rel="prefetch" href="/blog/assets/js/34.ec5e9699.js"><link rel="prefetch" href="/blog/assets/js/35.3a72e7b7.js"><link rel="prefetch" href="/blog/assets/js/36.70b4f732.js"><link rel="prefetch" href="/blog/assets/js/37.d466f5d8.js"><link rel="prefetch" href="/blog/assets/js/38.0831e579.js"><link rel="prefetch" href="/blog/assets/js/39.9fab27bf.js"><link rel="prefetch" href="/blog/assets/js/4.ae5ef321.js"><link rel="prefetch" href="/blog/assets/js/40.4dabe716.js"><link rel="prefetch" href="/blog/assets/js/41.f1eabdf5.js"><link rel="prefetch" href="/blog/assets/js/42.2d902d9c.js"><link rel="prefetch" href="/blog/assets/js/43.1523e2b3.js"><link rel="prefetch" href="/blog/assets/js/44.a253e242.js"><link rel="prefetch" href="/blog/assets/js/45.c81c793f.js"><link rel="prefetch" href="/blog/assets/js/46.6204da8f.js"><link rel="prefetch" href="/blog/assets/js/47.41a27667.js"><link rel="prefetch" href="/blog/assets/js/48.671912a0.js"><link rel="prefetch" href="/blog/assets/js/49.9abeef28.js"><link rel="prefetch" href="/blog/assets/js/5.8babe565.js"><link rel="prefetch" href="/blog/assets/js/50.1b7da075.js"><link rel="prefetch" href="/blog/assets/js/51.d87d8500.js"><link rel="prefetch" href="/blog/assets/js/52.124197e2.js"><link rel="prefetch" href="/blog/assets/js/53.73192ea4.js"><link rel="prefetch" href="/blog/assets/js/54.6767c92e.js"><link rel="prefetch" href="/blog/assets/js/55.9ae3ab7d.js"><link rel="prefetch" href="/blog/assets/js/56.1233fb2c.js"><link rel="prefetch" href="/blog/assets/js/57.a090ba91.js"><link rel="prefetch" href="/blog/assets/js/58.856bb7fa.js"><link rel="prefetch" href="/blog/assets/js/59.a3d328e0.js"><link rel="prefetch" href="/blog/assets/js/6.b651146e.js"><link rel="prefetch" href="/blog/assets/js/60.f1a99e20.js"><link rel="prefetch" href="/blog/assets/js/61.96e806a2.js"><link rel="prefetch" href="/blog/assets/js/62.59a8e50f.js"><link rel="prefetch" href="/blog/assets/js/63.6c4d7d0b.js"><link rel="prefetch" href="/blog/assets/js/64.79fad616.js"><link rel="prefetch" href="/blog/assets/js/65.e0feb186.js"><link rel="prefetch" href="/blog/assets/js/66.b1264f4f.js"><link rel="prefetch" href="/blog/assets/js/67.c55c7419.js"><link rel="prefetch" href="/blog/assets/js/68.8c8d0405.js"><link rel="prefetch" href="/blog/assets/js/69.7237534b.js"><link rel="prefetch" href="/blog/assets/js/70.7664413f.js"><link rel="prefetch" href="/blog/assets/js/71.fe626e38.js"><link rel="prefetch" href="/blog/assets/js/72.7182787a.js"><link rel="prefetch" href="/blog/assets/js/8.e0fcc1a3.js"><link rel="prefetch" href="/blog/assets/js/9.e4e4e726.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.09979b4e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-dad8a512><div data-v-dad8a512><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-dad8a512 data-v-dad8a512><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>郭峰</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>郭峰</span>
            
          <!---->
          2020
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">郭峰</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      源码分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/element/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  Element-ui源码解析
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue源码解析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      文章
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/leetcode/" class="nav-link"><i class="iconfont undefined"></i>
  leetcode解题
</a></li><li class="dropdown-subitem"><a href="/blog/design-patterns/" class="nav-link"><i class="iconfont undefined"></i>
  设计模式
</a></li><li class="dropdown-subitem"><a href="/blog/dsa/" class="nav-link"><i class="iconfont undefined"></i>
  数据结构与算法
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/blog/" class="nav-link"><i class="iconfont undefined"></i>
  博客
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/mhkz/blog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><!----> <h3 class="name" data-v-ca798c94>
    郭峰
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>13</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      源码分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/element/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  Element-ui源码解析
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue源码解析
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      文章
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/leetcode/" class="nav-link"><i class="iconfont undefined"></i>
  leetcode解题
</a></li><li class="dropdown-subitem"><a href="/blog/design-patterns/" class="nav-link"><i class="iconfont undefined"></i>
  设计模式
</a></li><li class="dropdown-subitem"><a href="/blog/dsa/" class="nav-link"><i class="iconfont undefined"></i>
  数据结构与算法
</a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/blog/" class="nav-link"><i class="iconfont undefined"></i>
  博客
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/mhkz/blog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/element/" aria-current="page" class="sidebar-link">前言</a></li><li><a href="/blog/element/docs/description.html" class="sidebar-link">组件库介绍</a></li><li><a href="/blog/element/docs/button.html" class="sidebar-link">button组件</a></li><li><a href="/blog/element/docs/layout.html" class="sidebar-link">layout布局组件</a></li><li><a href="/blog/element/docs/notification.html" aria-current="page" class="active sidebar-link">notify通知组件</a></li><li><a href="/blog/element/docs/form/base.html" class="sidebar-link">form表单组件(基础)</a></li><li><a href="/blog/element/docs/BmTable.html" class="sidebar-link">el-table 封装</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>郭峰</span>
            
          <!---->
          2020
        </a></span></div></div> <div data-v-dad8a512><main class="page"><div class="page-title" style="display:none;"><h1>notify通知组件</h1> <hr> <div data-v-aa64b9d0><i class="iconfont reco-account" data-v-aa64b9d0><span data-v-aa64b9d0>郭峰</span></i> <!----> <i class="iconfont reco-eye" data-v-aa64b9d0><span id="/blog/element/docs/notification.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-aa64b9d0><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="notify通知组件"><a href="#notify通知组件" class="header-anchor">#</a> notify通知组件</h1> <p>在我们项目中，<code>notify</code>比较常用，像一些请求失败提示啊之类的，使用也非常简单，一句js就可以：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$notify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
  message<span class="token operator">:</span> <span class="token string">'成功'</span><span class="token punctuation">,</span>
  type<span class="token operator">:</span> <span class="token string">'success'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="分析"><a href="#分析" class="header-anchor">#</a> 分析</h2> <p>我们在使用notify的时候，通过<code>this</code>直接调用，所以可以想到，<code>notify</code>组件是应该挂载到vue的原型上的，在源码<code>element-ui/src/index.js</code>可以看到:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Notification <span class="token keyword">from</span> <span class="token string">'../packages/notification/index.js'</span><span class="token punctuation">;</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$notify <span class="token operator">=</span> Notification<span class="token punctuation">;</span>
</code></pre></div><p>另外<code>notify</code>是个函数，我们在使用的时候，调用一个函数，通过传入一个配置对象就能直接生成一个组件，并且你如果审查元素，会发现是挂载body元素最后面的，如图所示：
<img src="/blog/assets/img/1.d43a04b5.png" alt="notify1">
不难想到，源码中肯定有一句<code>document.body.appendChild(el)</code>。<br>
一开始我好奇，调用<code>notify</code>函数，传入一个对象就能生成一个组件，这种是怎么做到的，看源码的时候，渐渐有了一些理解，简化一下代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// packages/notification/src/main.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Main <span class="token keyword">from</span> <span class="token string">'./main.vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> NotificationConstructor <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Main<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> instance<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">Notification</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NotificationConstructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> options
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Notification<span class="token punctuation">;</span>
</code></pre></div><p>看着好像是我们通过<code>this.$notify({})</code>调用的时候，调用的是<code>Notification</code>方法，该方法通过<code>NotificationConstructor</code>构造函数<code>new</code>一个<code>instance</code>实例并返回，在顺着看实例对应的构造函数<code>NotificationConstructor</code>，此时就看到了其庐山真面目，<code>Vue.extend(main)</code>。</p> <h2 id="extend"><a href="#extend" class="header-anchor">#</a> extend</h2> <p>说实话，如果不是去查看<code>notify</code>组件源码，我可能一直不会去关注<code>Vue.extend()</code>这个<code>api</code>，有些东西，因为不知道，所以在开发遇到某些问题的时候，根本就想不到这个点。<br></p> <p>既然<code>element-ui</code>源码中是通过这个实现的，那我们就看一下vue官网对于这个api的<a href="https://cn.vuejs.org/v2/api/#Vue-extend" target="_blank" rel="noopener noreferrer">介绍<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <img src="/blog/assets/img/2.447c4030.png" alt="2">
看着好像和<code>Vue.component()</code>第二个参数差不多，果然，在<code>Vue.component</code>的<code>api</code>中发现这样一段话：</p> <div class="language-md extra-class"><pre class="language-md"><code>// 注册组件，传入一个扩展过的构造器
Vue.component('my-component', Vue.extend({ /<span class="token italic"><span class="token punctuation">*</span><span class="token content"> ... </span><span class="token punctuation">*</span></span>/ }))

// 注册组件，传入一个选项对象 (自动调用 Vue.extend)
Vue.component('my-component', { /<span class="token italic"><span class="token punctuation">*</span><span class="token content"> ... </span><span class="token punctuation">*</span></span>/ })
</code></pre></div><p>看到这里你应该明白了其作用，我在简单总结一下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Vue.extend返回一个扩展实例构造器，能帮你预先设定一些选项</span>
<span class="token keyword">let</span> NotificationConstructor <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'aaa'</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">22</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 这里可能会报错，提示我们Vue仅运行时版本不支持template，可将模板编译为渲染函数</span>
  <span class="token comment">// 正好复习一下上节课讲的render函数</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">姓名：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">  年龄：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在使用的时候，直接new一个实例就行，并且可以传入配置对象去覆盖掉Vue.extend中预设的属性</span>
<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NotificationConstructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'bbb'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 渲染结果</span>
<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>姓名：bbb 年龄：<span class="token number">22</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
</code></pre></div><p>看完上面的，你应该完全理解<code>Vue.extend()</code>这个<code>api</code>的用法了。</p> <p><code>Vue.extend</code>除了上面那样传入一个对象外，也可以传入一个<code>.vue</code>组件，这样在写的时候，就更加方便了，不需要写<code>render</code>函数或者<code>template</code>模板。</p> <p>下面来正式进入notify源码，探究其内部实现原理。</p> <h2 id="基本实现"><a href="#基本实现" class="header-anchor">#</a> 基本实现</h2> <p>notify组件源码位于<code>element-ui/packages/notification/src/main.js</code>，简化一下逻辑如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Main <span class="token keyword">from</span> <span class="token string">'./main.vue'</span><span class="token punctuation">;</span>
<span class="token comment">// 这里不用多说了吧，看完上面的你应该了解其作用了</span>
<span class="token keyword">const</span> NotificationConstructor <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Main<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 当前实例对象，创建在Notification函数外面，是因为在Notification外要用到。</span>
<span class="token keyword">let</span> instance<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">Notification</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// 将我们传入的options拷贝一份。</span>
  <span class="token comment">// 这里merge方法作用和Object.assign()相同，所以这里为了简化，就用Object.assign替代</span>
  options <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

  instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NotificationConstructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> options
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 挂载</span>
  instance<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// $el是组件生成的dom对象</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Notification<span class="token punctuation">;</span>
</code></pre></div><p><code>main.js</code>引用了<code>main.vue</code>组件，在来看<code>main.vue</code>的，同样我会简化一下代码：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- vue过渡动画，需要配合v-if或者v-show使用 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>el-notification-fade<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> 
      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>['el-notification']<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>visible<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>el-notification__group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>el-notification__title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>el-notification__content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      visible<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      title<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里面的代码就比较简单了，没什么好说的。接下来测试，看我们调用this.$notify({ title: '提示', message: 'hello world' })看能否正常显示。
注意入口文件<code>element-ui/src/index.js</code>中需要引入组件，并且讲其挂载到vue的原型上。</p> <p>演示代码</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$notify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
        message<span class="token operator">:</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">'success'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>点击后发现页面毛也没有，审查元素后发现，组件以及追加到<code>body</code>后了，只是<code>display</code>设置为<code>none</code>，在<code>main.js</code>中<code>document.body.appendChild(instance.$el)</code>后添加一句：</p> <div class="language-js extra-class"><pre class="language-js"><code>instance<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p>再次点击发现出现了，效果如下：
<img src="data:image/png;base64,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" alt="3">
出来了，但是位置好像不太多，接下来我们调整一下位置。</p> <h2 id="position自定义弹框位置"><a href="#position自定义弹框位置" class="header-anchor">#</a> position自定义弹框位置</h2> <p>仔细看文档关于position的介绍，是可以设置在页面四个角，默认是在右上角（top-right）。
审查元素看一下:
<img src="/blog/assets/img/4.0983c301.png" alt="4">
通过在style中添加top来控制垂直方向，添加right类来控制左右，下面分别来看看在源码中是如何实现的，在main.vue中添加如下代码:
<img src="/blog/assets/img/5.80e7d13f.png" alt="5"> <img src="/blog/assets/img/6.11b4b118.png" alt="6">
查看效果:
<img src="/blog/assets/img/7.522a2a86.png" alt="7">
现在就到了正确的位置，它这position的位置设计挺巧妙的，可以好好学习一下。</p> <h2 id="多个notify实例"><a href="#多个notify实例" class="header-anchor">#</a> 多个notify实例</h2> <p>我们每点击一次，就会弹出一个notify框，并且为之在上一个的下面，如图所示：
<img src="/blog/assets/img/8.25a6e150.png" alt="8">
那这个是怎么实现的呢，每点击一次我们就会执行一遍Notification，生成一个弹框实例，并且挂载到body后面，这个很简单。难点是新生成的弹框位置如何设置。<br></p> <p>还记得上面我们设置positionStyle的值的时候，源码中是获取verticalOffset的值，我们为了好理解就直接设置为了0，现在改回来，看看源码中是如何动态设置其值的。<br>
你顺着verticalOffset往上找，发现main.js中有这么一段关于verticalOffset值的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> instances <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> position <span class="token operator">=</span> options<span class="token punctuation">.</span>position <span class="token operator">||</span> <span class="token string">'top-right'</span><span class="token punctuation">;</span>


<span class="token comment">// offset是用户设置的偏移距离，不知道的看一下element-ui的文档</span>
<span class="token keyword">let</span> verticalOffset <span class="token operator">=</span> options<span class="token punctuation">.</span>offset <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// instances是一个数组，用来存放当前所有生成的notify组件实例</span>
instances<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>position <span class="token operator">===</span> position<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当前组件偏移的位置，不明白的可以看下图</span>
  verticalOffset <span class="token operator">+=</span> item<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>offsetHeight <span class="token operator">+</span> <span class="token number">16</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
verticalOffset <span class="token operator">+=</span> <span class="token number">16</span><span class="token punctuation">;</span>
<span class="token comment">// 设置当前实例的偏移距离</span>
instance<span class="token punctuation">.</span>verticalOffset <span class="token operator">=</span> verticalOffset<span class="token punctuation">;</span>
<span class="token comment">// 将当前实例push进instances数组</span>
instances<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/blog/assets/img/9.f8826c39.png" alt="9">
在<code>main.vue</code>中将<code>positionStyle</code>的值改回来，并在<code>data</code>中添加<code>verticalOffset：0</code>。</p> <h2 id="close关闭"><a href="#close关闭" class="header-anchor">#</a> close关闭</h2> <p>关闭步骤为以下三步：</p> <div class="language-md extra-class"><pre class="language-md"><code>1.调用removeChild()将其从dom中移除，并且销毁当前组件实例
2.删除instances数组中当前实例
3.将之后的notify弹框位置整体向上移一位
</code></pre></div><p>分别来看源码中如何实现:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1.调用removeChild()将其从dom中移除，并且销毁当前组件实例</span>


<span class="token comment">// 点击关闭按钮是，调用了close方法</span>
methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置closed为true，触发watch对closed的监听</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>closed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'transitionend'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>destroyElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 销毁组件</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 移除dom元素</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
watch<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">closed</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token comment">// transitionend 事件会在 CSS transition 结束后触发</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'transitionend'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>destroyElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 2.删除instances数组中当前实例</span>

<span class="token comment">// 移除dom元素后，调用onClose方法</span>
<span class="token keyword">const</span> userOnClose <span class="token operator">=</span> options<span class="token punctuation">.</span>onClose<span class="token punctuation">;</span>      <span class="token comment">// 用户自定义的关闭时的回调函数</span>
options<span class="token punctuation">.</span><span class="token function-variable function">onClose</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  userOnClose
  Notification<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> userOnClose<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Notification<span class="token punctuation">.</span><span class="token function-variable function">close</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> userOnClose</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> len <span class="token operator">=</span> instances<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token comment">// 通过id筛选出当前实例，并且获取其下标</span>
  <span class="token keyword">const</span> instance <span class="token operator">=</span> instances<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>instance<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      index <span class="token operator">=</span> i<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 根据下标删除当前实例</span>
  instances<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 3.将之后的notify弹框位置整体向上移一位</span>
  <span class="token keyword">const</span> position <span class="token operator">=</span> instance<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
  <span class="token comment">// 获取当前要移除实例的高度</span>
  <span class="token keyword">const</span> removedHeight <span class="token operator">=</span> instance<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">;</span>
  <span class="token comment">// 循环instances数组，重新设置剩下的实例偏移量</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> index<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>instances<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>position <span class="token operator">===</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      instances<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">[</span>instance<span class="token punctuation">.</span>verticalProperty<span class="token punctuation">]</span> <span class="token operator">=</span>
        <span class="token function">parseInt</span><span class="token punctuation">(</span>instances<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">[</span>instance<span class="token punctuation">.</span>verticalProperty<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">-</span> removedHeight <span class="token operator">-</span> <span class="token number">16</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 上面for循环简化一下如下</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> instances<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断位置是否和要移除的元素位置相同，如果是不同位置的，肯定就不需要移动了</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>instances<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>position <span class="token operator">===</span> instance<span class="token punctuation">.</span>position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// instances[i]的高度 - 要移除元素的高度 - 两者的间隙（16px）</span>
      <span class="token function">parseInt</span><span class="token punctuation">(</span>instances<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>dom<span class="token punctuation">.</span>style<span class="token punctuation">[</span>instance<span class="token punctuation">.</span>verticalProperty<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">-</span> removedHeight <span class="token operator">-</span> <span class="token number">16</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看到这里，你应该对notify的大致流程以及实现原理有一个大致的了解了，剩下的一些点相信你自己也能看懂了。element-ui有很多点处理的很细节，值得好好学习</p> <p>本章节源码<a href="https://github.com/xiaofeng-bm/learn-element-ui" target="_blank" rel="noopener noreferrer">地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-40a3448a><li class="level-2" data-v-40a3448a><a href="/blog/element/docs/notification.html#分析" class="sidebar-link" data-v-40a3448a>分析</a></li><li class="level-2" data-v-40a3448a><a href="/blog/element/docs/notification.html#extend" class="sidebar-link" data-v-40a3448a>extend</a></li><li class="level-2" data-v-40a3448a><a href="/blog/element/docs/notification.html#基本实现" class="sidebar-link" data-v-40a3448a>基本实现</a></li><li class="level-2" data-v-40a3448a><a href="/blog/element/docs/notification.html#position自定义弹框位置" class="sidebar-link" data-v-40a3448a>position自定义弹框位置</a></li><li class="level-2" data-v-40a3448a><a href="/blog/element/docs/notification.html#多个notify实例" class="sidebar-link" data-v-40a3448a>多个notify实例</a></li><li class="level-2" data-v-40a3448a><a href="/blog/element/docs/notification.html#close关闭" class="sidebar-link" data-v-40a3448a>close关闭</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div></div></div>
    <script src="/blog/assets/js/app.ed40e995.js" defer></script><script src="/blog/assets/js/3.57e1f601.js" defer></script><script src="/blog/assets/js/1.380deb6a.js" defer></script><script src="/blog/assets/js/7.ee8b7bf7.js" defer></script>
  </body>
</html>
