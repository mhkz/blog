# 重绘&重排

## 布局
当生成一颗render树的时候，，浏览器就会根据这颗render树进行布局，确定每个元素的位置，大小。<br/>

以京东举例，在source中随便找个css文件中添加以下代码
```css
html * {
    outline: 1px solid red
}
```
类似如下这种。我们在写一个页面的时候，一般也是先把骨架搭好，然后再去每一个块中进行细化，浏览器也是，会先进行布局。有点类似于盖房子，先根据设计图做一个整体规划。
![4](./image/4.png)

## 绘制
布局之后，就开始绘制了，相当于拿着设计图开干了。

## 重排
我们在开发中，经常会对dom进行一些操作，比如改变div大小啊之类的，当我们在DOM中新增，删除，或者改变元素大小等操作，页面就需要重新排列，你不能说你把一个元素删了，它那个位置还空白留着，或者说你在某个元素前新增一个元素，那旧的元素肯定就需要一个个的往后挪，给新元素腾出位置来。

总结：所有会使页面结构进行改变的操作，都会引起重排。

## 重绘
重绘就很好理解了，比如我一个div原本是红色，你现在点击一下变成了蓝色，那这个div这一块就的重新绘制，这就是重绘。

:::tip
1、重绘和重排呢还是比较好理解的，和盖楼一样，重排呢，可以理解成重新盖楼，重排可以理解成重新装修。<br/>

2、尽量减少重绘和重排，尽量将一些改动收集到一起，一次改完。我们所熟知的虚拟DOM就是在帮助我们去减少重绘和重排，原理就是将一个操作所有引起页面改变的地方整合起来，一次去完成。<br/>

3、需要频繁改动的元素（比如动画）尽量使用绝对定位，因为绝对定位会脱离文档流，脱离文档流的元素就会减少对后面元素的影响。打个比方，在同一个文档流内，如果你频繁的去改动根元素的大小，每改一次，后面的元素都的跟着改，这样肯定开销很大。
:::