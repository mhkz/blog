---
title: 38.外观数列
date: 2020-07-05
tags:
 - 正则
---
[题目地址](https://leetcode-cn.com/problems/count-and-say/)

给定一个正整数 n（1 ≤ n ≤ 30），输出外观数列的第 n 项。

注意：整数序列中的每一项将表示为一个字符串。

「外观数列」是一个整数序列，从数字 1 开始，序列中的每一项都是对前一项的描述。前五项如下：
```md
1.     1
2.     11
3.     21
4.     1211
5.     111221
```
第一项是数字 1

描述前一项，这个数是 1 即 “一个 1 ”，记作 11

描述前一项，这个数是 11 即 “两个 1 ” ，记作 21

描述前一项，这个数是 21 即 “一个 2 一个 1 ” ，记作 1211

描述前一项，这个数是 1211 即 “一个 1 一个 2 两个 1 ” ，记作 111221

示例 1:
```md
输入: 1
输出: "1"
解释：这是一个基本样例。
```

示例 2:
```md
输入: 4
输出: "1211"
解释：当 n = 3 时，序列是 "21"，其中我们有 "2" 和 "1" 两组，"2" 可以读作 "12"，也就是出现频次 = 1 而 值 = 2；类似 "1" 可以读作 "11"。所以答案是 "12" 和 "11" 组合在一起，也就是 "1211"。
```

## 思路分析：
每一项都是对上一项的描述，比如6的上一项5为`111221`，那6就应该为`312211`，我的第一想法就是通过正则将相同项匹配出来。<br/>
比如`111221`用正则处理成`['111', '22', '1']`,然后我循环这个数组，做字符串的拼接。步骤如下：
- 1、通过`/(\d)\1*/g`将上一项处理为数组list。
- 2、循环list，字符串拼接，str += `${list[j].length, list[j][0]}`。

## 实现代码
```js
var countAndSay = function (n) {
  let res = "1";
  let reg = /(\d)\1*/g;
  for (let i = 1; i < n; i++) {
    // 通过match将相同项匹配出来
    let list = res.match(reg);
    res = "";
    // 循环list做字符串拼接
    for (let j = 0; j < list.length; j++) {
      res += `${list[j].length}${list[j][0]}`;
    }
  }
  return res;
};
// 执行用时：72 ms, 在所有 JavaScript 提交中击败了66.62%的用户
// 内存消耗：36.8 MB, 在所有 JavaScript 提交中击败了50.00%的用户
// 时间复杂度：On²
// 空间复杂度：O1
```
上面方法占用的内存有点多，所以去评论区里翻了翻，发现了好几种更加优秀的方法。
## 其它解法
解法一：巧用replace(推荐)
```js
var countAndSay = function (n) {
  let prev = "1";
  for (let i = 1; i < n; i++) {
    prev = prev.replace(/(\d)\1*/g, (item) => `${item.length}${item[0]}`);
  }
  return prev;
};
```
说明：这一个replace方法替代了我上面那一坨，写的时候没想到用这个方法，推荐推荐。

